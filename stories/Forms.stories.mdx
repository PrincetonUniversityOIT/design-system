import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { html } from 'lit-html';

<Meta title="Components/Form" component="Forms" />

export const TextInputTemplate = (args) => html`
    <div class="pjz-form-field">
        <label for="my-input">${ args.label }</label>
        <input class="pjz-input" id="my-input" type="text" placeholder="Placeholder" value="${ args.value }" />
    </div>
    <div class="pjz-form-field">
        <label for="my-input2">${ args.label } - Focused</label>
        <input class="pjz-input pjz-focus" id="my-input2" type="text" placeholder="Placeholder" value="${ args.value }" />
    </div>
    <div class="pjz-form-field--error">
        <label for="my-input3">${ args.label } - With Error</label>
        <span class="pjz-form-field-error-msg">Clear and brief error message</span>
        <input class="pjz-input pjz-input--error" id="my-input3" type="text" placeholder="Placeholder" value="${ args.value }" />
    </div>
    <div class="pjz-form-field">
        <label for="my-input4">${ args.label } - Required (Required)</label>
        <input class="pjz-input" id="my-input4" type="text" placeholder="Placeholder" required value="${ args.value }" />
    </div>
`;

export const MultilineTextInputTemplate = (args) => html`
    <label class="pjz-label" for="my-input4">${ args.label }</label>
    <textarea class="pjz-input" id="my-input4" type="text">${ args.value }</textarea>
`;

export const CheckboxTemplate = (args) => html`
    <fieldset class="pjz-fieldset">
        <legend class="pjz-sr-only">${ args.legend }</legend>
        <div class="pjz-checkbox">
            <input class="pjz-checkbox__input" type="checkbox" id="apple" type="checkbox" checked />
            <label class="pjz-checkbox__label" for="apple">Apple</label>
        </div>
        <div class="pjz-checkbox">
            <input class="pjz-checkbox__input" type="checkbox" id="orange" type="checkbox" />
            <label class="pjz-checkbox__label" for="orange">Orange</label>
        </div>
        <div class="pjz-checkbox">
            <input class="pjz-checkbox__input" type="checkbox" id="strawberry" type="checkbox" disabled />
            <label class="pjz-checkbox__label" for="strawberry">Strawberry</label>
        </div>
        <div class="pjz-checkbox">
            <input class="pjz-checkbox__input" type="checkbox" id="watermelon" type="checkbox" disabled checked />
            <label class="pjz-checkbox__label" for="watermelon">Watermelon</label>
        </div>
    </fieldset>
`;

export const DropdownTemplate = (args) => html`
    <style>
        .pjz-form-field {
            margin-top: 1.5rem;
        }
        .pjz-form-field label {
          display: block;
          line-height: 1.1;
          margin-bottom: .5rem;
          max-width: 30rem;    
        }
        .pjz-dropdown,
        .pjz-dropdown--error {
            background-color: #fff;
            position: relative;
        }
        .pjz-dropdown:after,
        .pjz-dropdown:before,
        .pjz-dropdown--error:after,
        .pjz-dropdown--error:before {
            bottom: 0;
            content: "";
            pointer-events: none;
            position: absolute;
            top: 0;
        }
        .pjz-dropdown:before,
        .pjz-dropdown--error:before {
            right: 0;
            width: 1.85em;
        }
        .pjz-dropdown:after,
        .pjz-dropdown--error:after {
            border-bottom: 2px solid #e77500;
            border-right: 2px solid #e77500;
            height: .5em;
            margin: auto;
            right: .95em;
            transform-origin: center right;
            transform: rotate(45deg);
            width: .5em;
            z-index: 2;
        }
        .pjz-dropdown select,
        .pjz-dropdown--error select {
            -moz-appearance: none;
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            box-shadow: none;
            border-radius: 0;
            border: 1px solid #b3c3cc;
            color: #000;
            line-height: normal;
            max-width: 100%;
            padding: .5em 2em .5em .5em;
            width: 100%;
        }
        .pjz-dropdown--error select {
            border: .25rem solid #b50909;
        }
        .pjz-dropdown select option,
        .pjz-dropdown--error select option {
            color: #000;
        }
        .pjz-dropdown select option[disabled],
        .pjz-dropdown--error select option[disabled] {
            color: #c8c8c8;
        }
    </style>
    <div class="pjz-form-field">
        <label for="my-dropdown-1">Dropdown</label>
        <div class="pjz-dropdown">
            <select id="my-dropdown-1">
                <option>Option 1</option>
                <option>Option 2</option>
                <option disabled>Option 3</option>
                <option>Option 4</option>
            </select>
        </div>
    </div>
    <div class="pjz-form-field">
        <label for="my-dropdown-2">Dropdown - Focused</label>
        <div class="pjz-dropdown pjz-focus">
            <select id="my-dropdown-2">
                <option>Option 1</option>
                <option>Option 2</option>
                <option disabled>Option 3</option>
                <option>Option 4</option>
            </select>
        </div>
    </div>
    <div class="pjz-form-field">
        <label for="my-dropdown-3">Dropdown - Focused</label>
        <div class="pjz-dropdown--error">
            <select id="my-dropdown-3">
                <option>Option 1</option>
                <option>Option 2</option>
                <option disabled>Option 3</option>
                <option>Option 4</option>
            </select>
        </div>
    </div>    
`;

export const ComboBoxTemplate = () => html`
    <pjz-combobox id="mycombo"></pjz-combobox>
    <script id="initscript">
        (function() {
            let options = [
                { name: 'Apple', value: 'Apple-Value', key: 'Apple-Value' },
                { name: 'Banana', value: 'Banana-Value', key: 'Banana-Value' },
                { name: 'Orange', value: 'Orange-Value', key: 'Orange-Value' },
            ];
            let combo = document.getElementById("mycombo");
            console.log('found combo?' + combo);
            console.log(combo);
            combo.options = options;            
        })();
    </script>
`;

export const AutocompleteTemplate = (args) => html`
    <script id="initscript">
        function generateAutocompleteResults(e) {
            let options = [
                { name: 'Apple (' + e.detail + ')', value: 'Apple-Value', key: 'Apple-Value' },
                { name: 'Banana (' + e.detail + ')', value: 'Banana-Value', key: 'Banana-Value' },
                { name: 'Orange (' + e.detail + ')', value: 'Orange-Value', key: 'Orange-Value' },
            ];
            e.target.options = options;
        }
        function optionSelected(e) {
            console.log('option-selected');
            console.log(e);
        }
    </script>
    <pjz-autocomplete id="myauto" @search-changed="${(e) => generateAutocompleteResults(e) }" @option-selected="${ args.optionSelected }"></pjz-autocomplete>
`;

export const FileUploadTemplate = (args) => html`
    <style>
        .pjz-file-upload {
            display: none;
        }
        .pjz-file-upload__label span[role=button] {
            display: inline-block;
            font-family: Roboto, sans-serif;
            font-size: 1rem;
            padding: 3px 8px;
            color: #ffffff;
            cursor: pointer;
            background-color: #265986;
        }
        .pjz-file-upload__label span[role=button]:hover {
            background-color: #183a57;
            border-color: #265986;
        }
        .pjz-file-upload__text {
            display: inline-block;
            margin-left: -5px;
            width: 20rem;
            font-family: Arial;
            font-size: 1rem;
            padding: 8px 8px;
            border: 1px solid #265986;
            color: #000000;
            background-color: #ffffff;
        }
    </style>
    <label for="fileupload" id="buttonlabel" class="pjz-file-upload__label">
        <span role="button" aria-controls="filename" tabindex="0">Upload File</span>
    </label>
    <input type="file" id="fileupload" class="pjz-file-upload" />
    <label for="filename" class="pjz-sr-only">Uploaded File</label>
    <input type="text" id="filename" autocomplete="off" readonly placeholder="No File Chosen" class="pjz-file-upload__text" />
`;

# Forms

## Accessibility Guidelines

* Always display form controls in the order that they appear in the HTML.  Screen readers will always follow document 
  order, not display order.
* Prefer a vertical layout where possible.  Limited vision makes it hard to scan across (per digital.gov)

## TODO

* Form fields that are focused and have an error need improved color palette or improved focus indicator.
* Checkboxes do not display properly in Firefox.
* Money entry field (puts commas in appropriate places and accepts appropriate characters '$,.' and possibly formats as people type)

<Canvas>
    <Story name="Multiline Text" args={{
        label: "Label",
        value: ""
    }}>
      {MultilineTextInputTemplate.bind({})}
    </Story>
</Canvas>

<Canvas>
    <Story name="Checkbox" args={{
        legend: "Types of Fruit"
    }}>
      {CheckboxTemplate.bind({})}
    </Story>
</Canvas>

<Canvas>
    <Story name="Dropdown" args={{
        legend: "Types of Fruit"
    }}>
      {DropdownTemplate.bind({})}
    </Story>
</Canvas>

<Canvas>
    <Story name="ComboBox" args={{
        legend: "Types of Fruit"
    }}>
      {ComboBoxTemplate.bind({})}
    </Story>
</Canvas>

<Canvas>
    <Story name="Autocomplete" args={{
        legend: "Types of Fruit"
    }}>
      {AutocompleteTemplate.bind({})}
    </Story>
</Canvas>

<Canvas>
    <Story name="File Upload" args={{
        label: "File Upload",
    }}>
      {FileUploadTemplate.bind({})}
    </Story>
</Canvas>
